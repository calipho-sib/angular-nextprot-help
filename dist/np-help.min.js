!function(a){"use strict";var b={helpUrl:"/nextprot-api/rdf/help/type/all.json",root:"",pages:["faq","home","entity/"]};a.module("npHelp",["ngRoute"]).constant("settings",angular.extend(b,npHelpSettings))}(angular),function(a,b){"use strict";a.module("npHelp").controller("HelpCtrl",["$scope","$location","rdfHelp","settings","$route","$log",function(a,c,d,e,f,g){function h(){if(c&&c.path()){var a=c.path().length>1?c.path().substring(1):e.root;if(console.log(a,c.path()),a===e.root)return e.pages[0]+".md";for(var b in e.pages)if(-1!==a.indexOf(e.pages[b]))return a+".md"}}a.entityName=f.current&&f.current.params.entity||"",a.entity={},a.settings=e,a.mdFile=h(),a.rdfHelp=d,a.pushState=c.$$html5,a.$on("$routeChangeStart",function(c,d){a.mdFile=h(),a.entity=={},a.entityName=b,d&&d.params&&d.params.entity&&(a.entity=a.getActiveElement(d.params.entity),a.entityName=d.params.entity),g.info("mdFile",a.mdFile),g.info("entityName",a.entityName),g.info("entity",a.entity)}),a.getActiveElement=function(b){for(var c in a.rdfHelp)if(a.rdfHelp[c].typeName===":"+b)return a.rdfHelp[c]},a.isActiveElement=function(b){b=b||"",b=b.replace(":","");var c=a.entityName===b||a.mdFile===b+".md";return c&&console.log("isactive",a.entityName,b),c},a.hrefBuild=function(a){return a=a.replace(":",""),e.root&&e.root.length?e.root+"/"+a:a},d.query().$promise.then(function(){a.entity=a.getActiveElement(a.entityName)})}])}(angular),function(a){"use strict";a.module("npHelp").factory("rdfHelp",["$resource","$q","settings",function(a,b,c){var d=function(){this.$dao={rdfHelp:a((c.baseUrl||"")+c.helpUrl)},this.ready=!1,this.$promise=b.when(this)};return d.prototype.query=function(){var a=this;return this.ready||(this.$promise=a.$dao.rdfHelp.query().$promise,this.$promise.then(function(b){angular.extend(a,b),a.ready=!0})),this},new d}])}(angular),function(a){"use strict";a.module("npHelp").directive("rdfHelp",[function(){return{restrict:"A",transclude:!0,templateUrl:"html/np-help.element.html",link:function(){}}}]).directive("markdown",["$compile","$http","$parse","$timeout",function(a,b,c){var d=new Showdown.converter;return{restrict:"E",scope:{mdSrc:"@"},replace:!0,link:function(a,e,f){var g=c(f.markdownOpts||{}),h=f.mdSrc;h?f.$observe("mdSrc",function(){b.get(f.mdSrc).then(function(a){e.html(d.makeHtml(a.data))},function(a){return g.silent?e.hide():void e.html(a)})}):e.html(d.makeHtml(e.text()))}}}]).filter("trusted",["$sce",function(a){return function(b){return a.trustAsResourceUrl(b)}}]).filter("cleanType",["$sce",function(){return function(a,b){return a&&"object"!=typeof a?(a=a.replace(":",""),b&&(a=a.toLowerCase()),a):a}}])}(angular),angular.module("npHelp").run(["$templateCache",function(a){a.put("html/np-help.element.html",'<div class="row offset1"> <div class="row"> <section id="{{entity.typeName}}"> <h2> {{entity.typeName|cleanType}}  <div ng-if="entity.values.length> 0" class="btn-group"> <button class="btn dropdown-toggle" data-toggle="dropdown">Values<span class="caret"></span> </button> <ul class="dropdown-menu"> <li ng-repeat="value in entity.values"><a href="">{{value}}</a></li> </ul> </div> <span class="badge badge-info">{{entity.instanceCount}}</span> </h2> <blockquote> {{entity.rdfsComment}} </blockquote> <div class="row"> <div class="col-xs-12 col-md-5 vertical-middle "> <div ng-repeat="parent in entity.parentTriples | filter : rdfHelp.triples.predicate"> <p><code><a ng-href="{{hrefBuild(\'entity/\'+parent.subjectType)}}" class="text-info">{{parent.subjectType}}</a></code> &nbsp; <code class="text-warning">{{parent.predicate}}</code></span> </p> </div> </div> <div class="col-xs-12 col-md-7 form-inline"> <div class="panel panel-default"> <div class="panel-heading"><h5 class="text-center">{{entity.typeName}}</h5></div> <div class="panel-body"> <div ng-repeat="t in entity.triples | filter : rdfHelp.triples.predicate"> <code class="text-warning">{{t.predicate}}</code> <code><a class="text-success" ng-href="{{hrefBuild(\'entity/\'+t.objectType)}}">{{t.objectType}}</a></code> &nbsp; <span class="label label-info">{{t.tripleCount}}</span> <select ng-if="t.literalType && t.values.length> 1" class="form-control"> <option ng-repeat="value in t.values" value="{{value}}">{{value}}</option> </select> <input ng-if="t.literalType && t.values.length==1" type="text" placeholder="{{t.values[0]}}" class="form-control"></input> </div> </div> </div> </div> </div> <div class="bs-docs-example"> <div ng-repeat="t in entity.triples | filter : rdfHelp.triples.predicate"> <code class="text-info">{{t.tripleSample}}</code> </div> </div> <div class="bs-docs-example"> <div ng-repeat="path in entity.pathToOrigin"> <code class="text-info">{{path}} ?statement</code> </div> </div> </section> </div> </div>'),a.put("html/np-help.md.html",'<markdown md-src="{{mdFile}}"></markdown>')}]);
//# sourceMappingURL=./dist/np-help.map